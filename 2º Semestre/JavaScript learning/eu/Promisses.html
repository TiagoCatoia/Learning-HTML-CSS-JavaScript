<!DOCTYPE html>
<html>
<head>
    <meta charset='utf-8'>
    <meta http-equiv='X-UA-Compatible' content='IE=edge'>
    <title>Promisses</title>
</head>
<body>
    <div id="posicao1"></div>
    <div id="posicao2"></div>
    <div id="posicao3"></div>
    <script>
        /*
        function carregarEnderecoCEP(cep) {
            document.querySelector("#posicao1").innerText = "inciando"
            
            fetch(`https://viacep.com.br/ws/${cep}/json/`)
                .then((resposta) => {
                    return resposta.json()
                })
                .then((endereco) => document.querySelector("#posicao2").innerText = `${endereco.logradouro}`)
                .catch((erro) => console.log("Erro na requisição", erro))
                .finally(() => document.querySelector("#posicao3").innerText = "terminou"
        
        )}

        carregarEnderecoCEP("13565820")
        */
       /*
        let promessa = new Promise((resolve, reject) => {
            let x, y, z
            for (x=0; x<900000; x++) {
                for (y=0; y<10000; y++) {
                    z = x * y
                }
            }
            resolve("sucesso") // referencia para função de sucesso (resolve)
            //reject("deu ruim") // referencia para função de fracasso (reject)
        })
        console.log("iniciando...")
        promessa.then(function (mensagem) {
            console.log(mensagem)
        })
        console.log("fim")
        */
        //IIFE
        (async function (){
            let promessa = new Promise((resolve, reject) => {
            let x, y, z
            for (x=0; x<900000; x++) {
                for (y=0; y<10000; y++) {
                    z = x * y
                }
            }
            resolve("sucesso") // referencia para função de sucesso (resolve)
            //reject("deu ruim") // referencia para função de fracasso (reject)
            })
            console.log("iniciando...")
            let resultado = await promessa // sucesso
            console.log(resultado)
            console.log("fim")
        })()
    </script>
</body>
</html>